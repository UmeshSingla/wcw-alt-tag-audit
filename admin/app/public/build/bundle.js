var app=function(){"use strict";function t(){}function e(t){return t()}function n(){return Object.create(null)}function o(t){t.forEach(e)}function r(t){return"function"==typeof t}function l(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function a(t,e){t.appendChild(e)}function c(t,e,n){t.insertBefore(e,n||null)}function i(t){t.parentNode.removeChild(t)}function s(t){return document.createElement(t)}function u(t){return document.createTextNode(t)}function d(){return u(" ")}function f(t,e,n,o){return t.addEventListener(e,n,o),()=>t.removeEventListener(e,n,o)}function m(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function p(t,e){(null!=e||t.value)&&(t.value=e)}let g;function _(t){g=t}function h(){if(!g)throw new Error("Function called outside component initialization");return g}const v=[],$=[],x=[],w=[],y=Promise.resolve();let b=!1;function E(t){x.push(t)}let k=!1;const j=new Set;function M(){if(!k){k=!0;do{for(let t=0;t<v.length;t+=1){const e=v[t];_(e),A(e.$$)}for(v.length=0;$.length;)$.pop()();for(let t=0;t<x.length;t+=1){const e=x[t];j.has(e)||(j.add(e),e())}x.length=0}while(v.length);for(;w.length;)w.pop()();b=!1,k=!1,j.clear()}}function A(t){if(null!==t.fragment){t.update(),o(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(E)}}const N=new Set;let z;function C(t,e){t&&t.i&&(N.delete(t),t.i(e))}function S(t,e,n,o){if(t&&t.o){if(N.has(t))return;N.add(t),z.c.push(()=>{N.delete(t),o&&(n&&t.d(1),o())}),t.o(e)}}function T(t,n,l){const{fragment:a,on_mount:c,on_destroy:i,after_update:s}=t.$$;a&&a.m(n,l),E(()=>{const n=c.map(e).filter(r);i?i.push(...n):o(n),t.$$.on_mount=[]}),s.forEach(E)}function L(t,e){const n=t.$$;null!==n.fragment&&(o(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function U(t,e){-1===t.$$.dirty[0]&&(v.push(t),b||(b=!0,y.then(M)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function q(e,r,l,a,c,s,u=[-1]){const d=g;_(e);const f=r.props||{},m=e.$$={fragment:null,ctx:null,props:s,update:t,not_equal:c,bound:n(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(d?d.$$.context:[]),callbacks:n(),dirty:u};let p=!1;if(m.ctx=l?l(e,f,(t,n,...o)=>{const r=o.length?o[0]:n;return m.ctx&&c(m.ctx[t],m.ctx[t]=r)&&(m.bound[t]&&m.bound[t](r),p&&U(e,t)),n}):[],m.update(),p=!0,o(m.before_update),m.fragment=!!a&&a(m.ctx),r.target){if(r.hydrate){const t=function(t){return Array.from(t.childNodes)}(r.target);m.fragment&&m.fragment.l(t),t.forEach(i)}else m.fragment&&m.fragment.c();r.intro&&C(e.$$.fragment),T(e,r.target,r.anchor),M()}_(d)}class B{$destroy(){L(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(){}}function O(e){let n,r,l,g,_,h,v,$,x,w,y,b,E,k,j,M,A,N,z,C,S,T;return{c(){var t;n=s("div"),r=s("div"),l=s("img"),_=d(),h=s("a"),v=u("View full size (opens in new tab)"),x=d(),w=s("div"),y=s("label"),b=u("Enter alt text below"),k=d(),j=s("input"),N=d(),z=s("div"),C=s("button"),C.textContent="Add alt text",l.src!==(g=e[0].path)&&m(l,"src",g),m(l,"alt",e[1]),m(l,"class","svelte-vavyv7"),m(h,"href",$=e[0].large),m(h,"target","_blank"),m(r,"class","svelte-vavyv7"),m(y,"for",E="enter_alt_text_"+e[0].id),m(j,"type","text"),m(j,"id",M="enter_alt_text_"+e[0].id),m(j,"name",A="enter_alt_text_"+e[0].id),m(w,"class","svelte-vavyv7"),m(C,"class","button"),m(z,"class","svelte-vavyv7"),m(n,"class",(t=e[2]?"media media--odd":"media media--even",S=(null==t?"":t)+" svelte-vavyv7"))},m(t,i,s){c(t,n,i),a(n,r),a(r,l),a(r,_),a(r,h),a(h,v),a(n,x),a(n,w),a(w,y),a(y,b),a(w,k),a(w,j),p(j,e[1]),a(n,N),a(n,z),a(z,C),s&&o(T),T=[f(j,"input",e[6]),f(C,"click",e[3])]},p(t,[e]){1&e&&l.src!==(g=t[0].path)&&m(l,"src",g),2&e&&m(l,"alt",t[1]),1&e&&$!==($=t[0].large)&&m(h,"href",$),1&e&&E!==(E="enter_alt_text_"+t[0].id)&&m(y,"for",E),1&e&&M!==(M="enter_alt_text_"+t[0].id)&&m(j,"id",M),1&e&&A!==(A="enter_alt_text_"+t[0].id)&&m(j,"name",A),2&e&&j.value!==t[1]&&p(j,t[1])},i:t,o:t,d(t){t&&i(n),o(T)}}}function Q(t,e,n){let{picture:o={}}=e,{index:r=0}=e,{removeMedia:l=(()=>{})}=e,a="",c=r%2==1;console.log(c);return t.$set=t=>{"picture"in t&&n(0,o=t.picture),"index"in t&&n(4,r=t.index),"removeMedia"in t&&n(5,l=t.removeMedia)},[o,a,c,t=>{const e={action:"wcw_update_alt_text",nonce:wcw_alt_tags.updateAltTextNonce,altText:a,media:o.id};jQuery.post(wcw_alt_tags.ajaxUrl,e,t=>{0==t&&""!=a&&(l(r),n(1,a=""))})},r,l,function(){a=this.value,n(1,a)}]}class F extends B{constructor(t){super(),q(this,t,Q,O,l,{picture:0,index:4,removeMedia:5})}}function P(t,e,n){const o=t.slice();return o[11]=e[n],o[13]=n,o}function R(t){let e;const n=new F({props:{picture:t[11],index:t[13],removeMedia:t[3]}});return{c(){var t;(t=n.$$.fragment)&&t.c()},m(t,o){T(n,t,o),e=!0},p(t,e){const o={};3&e&&(o.picture=t[11]),n.$set(o)},i(t){e||(C(n.$$.fragment,t),e=!0)},o(t){S(n.$$.fragment,t),e=!1},d(t){L(n,t)}}}function V(e){let n,o,r;return{c(){n=s("div"),o=s("button"),o.textContent="Load more",m(o,"class","button"),m(n,"class","button-wrap svelte-12lsuys")},m(t,l,i){c(t,n,l),a(n,o),i&&r(),r=f(o,"click",e[2])},p:t,d(t){t&&i(n),r()}}}function Y(t){let e,n,r,l,f,p,g,_,h=t[0].length+"",v=t[0].slice(0,t[1]),$=[];for(let e=0;e<v.length;e+=1)$[e]=R(P(t,v,e));const x=t=>S($[t],1,1,()=>{$[t]=null});let w=t[1]<t[0].length&&V(t);return{c(){e=s("div"),n=s("p"),r=u("You have "),l=u(h),f=u(" alt tags to review."),p=d();for(let t=0;t<$.length;t+=1)$[t].c();g=d(),w&&w.c(),m(n,"class","svelte-12lsuys"),m(e,"class","widefat svelte-12lsuys")},m(t,o){c(t,e,o),a(e,n),a(n,r),a(n,l),a(n,f),a(e,p);for(let t=0;t<$.length;t+=1)$[t].m(e,null);a(e,g),w&&w.m(e,null),_=!0},p(t,[n]){if((!_||1&n)&&h!==(h=t[0].length+"")&&function(t,e){e=""+e,t.data!==e&&(t.data=e)}(l,h),11&n){let r;for(v=t[0].slice(0,t[1]),r=0;r<v.length;r+=1){const o=P(t,v,r);$[r]?($[r].p(o,n),C($[r],1)):($[r]=R(o),$[r].c(),C($[r],1),$[r].m(e,g))}for(z={r:0,c:[],p:z},r=v.length;r<$.length;r+=1)x(r);z.r||o(z.c),z=z.p}t[1]<t[0].length?w?w.p(t,n):(w=V(t),w.c(),w.m(e,null)):w&&(w.d(1),w=null)},i(t){if(!_){for(let t=0;t<v.length;t+=1)C($[t]);_=!0}},o(t){$=$.filter(Boolean);for(let t=0;t<$.length;t+=1)S($[t]);_=!1},d(t){t&&i(e),function(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}($,t),w&&w.d()}}}function D(t,e,n){let o=[],r=!0,l=0,a=10,c=!1;const i=()=>{fetch(`${wcw_alt_tags.restUrl}?offset=${l}`).then(t=>t.json()).then(t=>{t.length>0?document.cookie="wcw_alt_clean=clean":document.cookie="wcw_alt_clean=dirty",t.length<10&&(r=!1),u(t),r&&(l+=10,i())})},s=t=>!!t.media_details.sizes&&t.media_details.sizes.thumbnail.source_url,u=t=>{t.forEach(t=>{if(""==t.alt_text&&"image"==t.media_type&&"image/svg+xml"!=t.mime_type&&"image/tiff"!=t.mime_type){if(s(t)){let e={id:t.id,path:s(t),large:t.source_url};n(0,o=[...o,e])}c||(c=!0,(()=>{const t=c,e={action:"wcw_update_site_message",nonce:wcw_alt_tags.updateSiteMessageNonce,status:t};jQuery.post(wcw_alt_tags.ajaxUrl,e,t=>{console.log("message received master")})})())}})};var d;return d=()=>{i(),document.cookie="wcw_alt_visited=visited;max-age=31536000"},h().$$.on_mount.push(d),function(t){h().$$.after_update.push(t)}(()=>{}),[o,a,()=>{n(1,a+=10)},t=>{o.splice(t,1),n(0,o)}]}return new class extends B{constructor(t){super(),q(this,t,D,Y,l,{})}}({target:document.querySelector("#altTagRoot")})}();
//# sourceMappingURL=bundle.js.map
